url <- "https://github.com/fonnesbeck/Bios6301/raw/master/datasets/haart.csv"
haart <- read.csv(url, header = TRUE, stringsAsFactors = FALSE)
haart$init.date <- as.Date(haart$init.date,"%m/%d/%y")
haart$last.visit <- as.Date(haart$last.visit,"%m/%d/%y")
haart$date.death <- as.Date(haart$date.death,"%m/%d/%y")
table(format(haart$init.date, "%Y"))
# eliminate more than 1 year of the initial visit and marked NA in the date.death
haart$indicator <- ifelse((haart$date.death - haart$init.date > 365 | is.na(haart$date.death)),0,1)
sum(haart$indicator==1)
# if NA in the date.death, use the last - init
# if
haart$follow.up <- ifelse(is.na(haart$date.death), haart$last.visit - haart$init.date,
haart$date.death - haart$init.date)
haart$follow.up[haart$follow.up > 365] <- 365
quantile(haart$follow.up)
View(haart)
View(haart)
# if NA in the date.death, use the last - init
# if
haart$follow.up <- ifelse(is.na(haart$last.visit), haart$date.death - haart$init.date,
haart$last.visit - haart$init.date)
haart$follow.up[haart$follow.up > 365] <- 365
quantile(haart$follow.up)
